<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Work with American Community Survey Tables through the US Census API • hercacstables</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Work with American Community Survey Tables through the US Census API">
<meta name="description" content="The American Community Survey (ACS) from the US Census's website returns data in a weirdly idiosyncratic way. There are many subtotals in each table. Grouping variables are organized in a tree-like, rather than tabular fashion. This package is intended to make it easy to access and use the ACS data with R.">
<meta property="og:description" content="The American Community Survey (ACS) from the US Census's website returns data in a weirdly idiosyncratic way. There are many subtotals in each table. Grouping variables are organized in a tree-like, rather than tabular fashion. This package is intended to make it easy to access and use the ACS data with R.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">hercacstables</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/hercacstables.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/average_tract_poverty_ratio.html">Average Poverty Ratios by Tract in Racine County, WI</a></li>
    <li><a class="dropdown-item" href="articles/children_in_poverty.html">Children in Poverty</a></li>
    <li><a class="dropdown-item" href="articles/pop-changes-in-big-oh-districts.html">pop-changes-in-big-oh-districts</a></li>
    <li><a class="dropdown-item" href="articles/race_ethnicity_categories.html">Race/Ethnicity Categories in ACS Tables</a></li>
    <li><a class="dropdown-item" href="articles/set-up-your-api-key.html">Set up your API key</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="hercacstables">hercacstables<a class="anchor" aria-label="anchor" href="#hercacstables"></a>
</h1></div>
<!-- badges: start -->
<!-- badges: end -->
<p>If this is your first time using <code>hercacstables</code> then you probably want to register with the Census. The Census limits the number of anonymous API queries that it receives from any one IP address. Check out <code><a href="articles/set-up-your-api-key.html">vignette("set-up-your-api-key", package = "hercacstables")</a></code>.</p>
<p>Otherwise, welcome back!</p>
<div class="section level2">
<h2 id="for-the-newest-r-users">For the newest R users:<a class="anchor" aria-label="anchor" href="#for-the-newest-r-users"></a>
</h2>
<p>You may be new to R, but not data science, in which case I suggest checking out <a href="https://r4ds.hadley.nz/intro.html" class="external-link">R for Data Science</a>. If you’re not coming from a data science perspective, I have heard good things about <a href="https://datascienceineducation.com/" class="external-link">this book</a>.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"higherX4Racine/hercacstables"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<p>The American Community Survey (ACS) from the US Census’s website provides a vast amount of useful data.</p>
<figure><img src="reference/figures/README-group-descriptions-wordcloud.png" alt="A wordcloud made from the Census’ descriptions of its ACS groups"><figcaption aria-hidden="true">
A wordcloud made from the Census’ descriptions of its ACS groups
</figcaption></figure><p>However, it returns those data in a weirdly idiosyncratic way. Even though the output seems tabular, the data are really organized in a tree-like fashion. This package is intended to make it easy to access and use the ACS data with R.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Let’s say that you are a data intern for a <a href="https://cityofracine.org/WasteWater/Commission/" class="external-link">wastewater agency</a> in the southeastern part of Wisconsin. Your mentors have asked you to find insights from the American Community Survey.</p>
<div class="section level3">
<h3 id="specifying-your-community">Specifying your community<a class="anchor" aria-label="anchor" href="#specifying-your-community"></a>
</h3>
<p>They tell you that the wastewater commission’s area of responsibility is essentially identical to the local school district’s, <a href="https://www.rusd.org" class="external-link">Racine Unified</a>.</p>
<p>You look for geographical levels related to schools in <code><a href="reference/ACS_GEOGRAPHY_METADATA.html">hercacstables::ACS_GEOGRAPHY_METADATA</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SCHOOL_GEOGRAPHIES</span> <span class="op">&lt;-</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu">hercacstables</span><span class="fu">::</span><span class="va"><a href="reference/ACS_GEOGRAPHY_METADATA.html">ACS_GEOGRAPHY_METADATA</a></span>,</span>
<span>                                    <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"school"</span>, <span class="va">.data</span><span class="op">$</span><span class="va">`Geographic Level`</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>This table tells us two things. First, he geographic level that you should examine is “school district (unified)”. Second, you also need to specify the state when you’re fetching data about it. With <code><a href="reference/fetch_data.html">hercacstables::fetch_data()</a></code>, and tools from the <a href="https://www.tidyverse.org" title="The tidyverse" class="external-link">tidyverse</a>, you can find the FIPS codes for unified school districts in Wisconsin that have the word “Racine” in them.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RACINE_DISTRICTS</span> <span class="op">&lt;-</span> <span class="st">"NAME"</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">hercacstables</span><span class="fu">::</span><span class="fu"><a href="reference/fetch_data.html">fetch_data</a></span><span class="op">(</span></span>
<span>        variables <span class="op">=</span> <span class="va">_</span>,</span>
<span>        year <span class="op">=</span> <span class="fl">2020</span>,                           <span class="co"># the most recent decennial</span></span>
<span>        for_geo <span class="op">=</span> <span class="st">"school district (unified)"</span>, <span class="co"># see above</span></span>
<span>        for_items <span class="op">=</span> <span class="st">"*"</span>,                       <span class="co"># this wildcard gets every item</span></span>
<span>        survey_type <span class="op">=</span> <span class="st">"dec"</span>,                   <span class="co"># not actually the ACS *flex*</span></span>
<span>        table_or_survey_code <span class="op">=</span> <span class="st">"pl"</span>,           <span class="co"># this data set is similar to ACS</span></span>
<span>        state <span class="op">=</span> <span class="fl">55L</span>                            <span class="co"># the Badger State</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">.data</span><span class="op">$</span><span class="va">NAME</span>, <span class="st">"Racine"</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="46%">
<col width="9%">
<col width="36%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="left">NAME</th>
<th align="left">state</th>
<th align="left">school district (unified)</th>
<th align="right">Year</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">Racine School District, Wisconsin</td>
<td align="left">55</td>
<td align="left">12360</td>
<td align="right">2020</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="finding-relevant-data">Finding relevant data<a class="anchor" aria-label="anchor" href="#finding-relevant-data"></a>
</h3>
<p>The first thing that you could do is to check for data related to plumbing. If you were doing this without R, you might visit <a href="data.census.gov"></a> and search for “ACS plumbing”.</p>
<div class="section level4">
<h4 id="groups-with-relevant-data">Groups with relevant data<a class="anchor" aria-label="anchor" href="#groups-with-relevant-data"></a>
</h4>
<p>With <code>hercacstables</code>, you would search within its metadata about ACS groups:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PLUMBING_GROUPS</span> <span class="op">&lt;-</span> <span class="fu">hercacstables</span><span class="fu">::</span><span class="va"><a href="reference/ACS_GROUP_METADATA.html">ACS_GROUP_METADATA</a></span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"plumbing"</span>,          <span class="co"># search for the term "plumbing"</span></span>
<span>              <span class="va">.data</span><span class="op">$</span><span class="va">Description</span>,  <span class="co"># within the "Description" column</span></span>
<span>              ignore.case <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># ignore capitalization</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="20%">
<col width="20%">
<col width="20%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">Group</th>
<th align="left">Universe</th>
<th align="left">Description</th>
<th align="left">ACS1</th>
<th align="left">ACS5</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">B25016</td>
<td align="left">Occupied housing units</td>
<td align="left">Tenure by Plumbing Facilities by Occupants per Room</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">B25047</td>
<td align="left">Housing units</td>
<td align="left">Plumbing Facilities for All Housing Units</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">B25048</td>
<td align="left">Occupied housing units</td>
<td align="left">Plumbing Facilities for Occupied Housing Units</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">B25049</td>
<td align="left">Occupied housing units</td>
<td align="left">Tenure by Plumbing Facilities</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
</tr>
<tr class="odd">
<td align="left">B25050</td>
<td align="left">Occupied housing units</td>
<td align="left">Plumbing Facilities by Occupants per Room by Year Structure Built</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
</tr>
<tr class="even">
<td align="left">B99259</td>
<td align="left">Housing units</td>
<td align="left">Allocation of Plumbing Facilities</td>
<td align="left">TRUE</td>
<td align="left">TRUE</td>
</tr>
</tbody>
</table>
<p>It appears that the keyword “plumbing” appears in 6 different ACS groups.</p>
</div>
</div>
<div class="section level3">
<h3 id="specific-variables-about-plumbing">Specific variables about plumbing<a class="anchor" aria-label="anchor" href="#specific-variables-about-plumbing"></a>
</h3>
<p>Let’s say that “Tenure<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Whether the occupants rent or own, not if they can’t be fired.&lt;/p&gt;"><sup>1</sup></a> by plumbing facilities” jumps out to you as potentially interesting.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">GROUP</span> <span class="op">&lt;-</span> <span class="st">"B25049"</span></span></code></pre></div>
<p>There is metadata in <code>hercacstables</code> about variables, too. You can use search it to see what specific data is reported by group B25049.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PLUMBING_VARIABLES</span> <span class="op">&lt;-</span> <span class="fu">hercacstables</span><span class="fu">::</span><span class="va"><a href="reference/ACS_VARIABLE_METADATA.html">ACS_VARIABLE_METADATA</a></span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="va">.data</span><span class="op">$</span><span class="va">Dataset</span> <span class="op">==</span> <span class="st">"ACS1"</span>, <span class="co"># use the 1-year dataset only</span></span>
<span>        <span class="va">.data</span><span class="op">$</span><span class="va">Group</span> <span class="op">==</span> <span class="va">GROUP</span>     <span class="co"># pull all of the variables for this group</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="20%">
<col width="20%">
<col width="20%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">Dataset</th>
<th align="left">Group</th>
<th align="right">Index</th>
<th align="left">Variable</th>
<th align="left">Details</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">1</td>
<td align="left">B25049_001E</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">2</td>
<td align="left">B25049_002E</td>
<td align="left">Owner occupied</td>
</tr>
<tr class="odd">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">3</td>
<td align="left">B25049_003E</td>
<td align="left">Owner occupied , Complete plumbing facilities</td>
</tr>
<tr class="even">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">4</td>
<td align="left">B25049_004E</td>
<td align="left">Owner occupied , Lacking plumbing facilities</td>
</tr>
<tr class="odd">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">5</td>
<td align="left">B25049_005E</td>
<td align="left">Renter occupied</td>
</tr>
<tr class="even">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">6</td>
<td align="left">B25049_006E</td>
<td align="left">Renter occupied , Complete plumbing facilities</td>
</tr>
<tr class="odd">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">7</td>
<td align="left">B25049_007E</td>
<td align="left">Renter occupied , Lacking plumbing facilities</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="unpacking-variable-details">Unpacking variable details<a class="anchor" aria-label="anchor" href="#unpacking-variable-details"></a>
</h3>
<p>You can see that group B25049 reports the number of households that have, or do not have, plumbing facilities. It further breaks those households down into renters and owner-occupants. The raw metadata from the Census, and in <code><a href="reference/ACS_VARIABLE_METADATA.html">hercacstables::ACS_VARIABLE_METADATA</a></code>, packs all of that information into the “Details” column.</p>
<p>It would be more useful if we actually had separate columns for the types of tenure and plumbing facilities. We also don’t need row 1, which is the total number of households, or rows 2 and 5, which report subtotals by tenure. The unique data are in rows 2, 3, 6, and 7. The best way to do this is to use <code><a href="reference/unpack_group_details.html">hercacstables::unpack_group_details()</a></code> in combination with tools from the <a href="https://www.tidyverse.org" title="The tidyverse" class="external-link">tidyverse</a></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PLUMBING_VARIABLES</span> <span class="op">&lt;-</span> <span class="va">GROUP</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">hercacstables</span><span class="fu">::</span><span class="fu"><a href="reference/unpack_group_details.html">unpack_group_details</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="va">.data</span><span class="op">$</span><span class="va">Dataset</span> <span class="op">==</span> <span class="st">"ACS1"</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span></span>
<span>        Tenure <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>        Plumbing <span class="op">=</span> <span class="st">"B"</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">if_all</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Tenure"</span>, <span class="st">"Plumbing"</span><span class="op">)</span>,</span>
<span>                      \<span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">.</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="10%">
<col width="9%">
<col width="8%">
<col width="15%">
<col width="20%">
<col width="35%">
</colgroup>
<thead><tr class="header">
<th align="left">Dataset</th>
<th align="left">Group</th>
<th align="right">Index</th>
<th align="left">Variable</th>
<th align="left">Tenure</th>
<th align="left">Plumbing</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">3</td>
<td align="left">B25049_003E</td>
<td align="left">Owner occupied</td>
<td align="left">Complete plumbing facilities</td>
</tr>
<tr class="even">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">4</td>
<td align="left">B25049_004E</td>
<td align="left">Owner occupied</td>
<td align="left">Lacking plumbing facilities</td>
</tr>
<tr class="odd">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">6</td>
<td align="left">B25049_006E</td>
<td align="left">Renter occupied</td>
<td align="left">Complete plumbing facilities</td>
</tr>
<tr class="even">
<td align="left">ACS1</td>
<td align="left">B25049</td>
<td align="right">7</td>
<td align="left">B25049_007E</td>
<td align="left">Renter occupied</td>
<td align="left">Lacking plumbing facilities</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="fetch-data">Fetch data<a class="anchor" aria-label="anchor" href="#fetch-data"></a>
</h3>
<p>We are finally ready to pull a recent history of access to plumbing in eastern Racine County. Once again, we’ll use <code><a href="reference/fetch_data.html">hercacstables::fetch_data()</a></code> and the <a href="https://www.tidyverse.org" title="The tidyverse" class="external-link">tidyverse</a>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RAW_RACINE_PLUMBING</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2005</span><span class="op">:</span><span class="fl">2019</span>, <span class="fl">2021</span><span class="op">:</span><span class="fl">2023</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span></span>
<span>        \<span class="op">(</span><span class="va">.year</span><span class="op">)</span> <span class="fu">hercacstables</span><span class="fu">::</span><span class="fu"><a href="reference/fetch_data.html">fetch_data</a></span><span class="op">(</span></span>
<span>            variables <span class="op">=</span> <span class="va">PLUMBING_VARIABLES</span><span class="op">$</span><span class="va">Variable</span>,</span>
<span>            year <span class="op">=</span> <span class="va">.year</span>,</span>
<span>            for_geo <span class="op">=</span> <span class="st">"school district (unified)"</span>,</span>
<span>            for_items <span class="op">=</span> <span class="st">"12360"</span>,</span>
<span>            survey_type <span class="op">=</span> <span class="st">"acs"</span>,</span>
<span>            table_or_survey_code <span class="op">=</span> <span class="st">"acs1"</span>,</span>
<span>            state <span class="op">=</span> <span class="fl">55L</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/list_c.html" class="external-link">list_rbind</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">state</th>
<th align="left">school district (unified)</th>
<th align="left">Group</th>
<th align="right">Index</th>
<th align="right">Value</th>
<th align="right">Year</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">55</td>
<td align="left">12360</td>
<td align="left">B25049</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">2008</td>
</tr>
<tr class="even">
<td align="left">55</td>
<td align="left">12360</td>
<td align="left">B25049</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">2015</td>
</tr>
<tr class="odd">
<td align="left">55</td>
<td align="left">12360</td>
<td align="left">B25049</td>
<td align="right">4</td>
<td align="right">0</td>
<td align="right">2016</td>
</tr>
<tr class="even">
<td align="left">55</td>
<td align="left">12360</td>
<td align="left">B25049</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="right">2010</td>
</tr>
</tbody>
</table>
<p>The data in <code>RAW_RACINE_PLUMBING</code> don’t make much sense without the information in <code>PLUMBING_VARIABLES</code>. Fortunately, we can use the <a href="https://www.tidyverse.org" title="The tidyverse" class="external-link">tidyverse</a> to join the two tables together.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RACINE_PLUMBING</span> <span class="op">&lt;-</span> <span class="va">PLUMBING_VARIABLES</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span></span>
<span>        <span class="va">RAW_RACINE_PLUMBING</span>,</span>
<span>        by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Group"</span>, <span class="st">"Index"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>        <span class="st">"Year"</span>,</span>
<span>        <span class="st">"Tenure"</span>,</span>
<span>        <span class="st">"Plumbing"</span>,</span>
<span>        Households <span class="op">=</span> <span class="st">"Value"</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<p><code>RACINE_PLUMBING</code> has 72 rows, which is too many to show in a README. Let’s just look at how the number of homes without plumbing has changed over the years of the ACS.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">NO_PLUMBING</span> <span class="op">&lt;-</span> <span class="va">RACINE_PLUMBING</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>        <span class="va">.data</span><span class="op">$</span><span class="va">Plumbing</span> <span class="op">==</span> <span class="st">"Lacking plumbing facilities"</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>        <span class="st">"Year"</span>,</span>
<span>        <span class="st">"Tenure"</span>,</span>
<span>        <span class="st">"Households"</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>        names_from <span class="op">=</span> <span class="st">"Tenure"</span>,</span>
<span>        values_from <span class="op">=</span> <span class="st">"Households"</span>,</span>
<span>        values_fill <span class="op">=</span> <span class="cn">NA</span></span>
<span>    <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">NO_PLUMBING</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">Year</th>
<th align="right">Owner occupied</th>
<th align="right">Renter occupied</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">2005</td>
<td align="right">111</td>
<td align="right">131</td>
</tr>
<tr class="even">
<td align="right">2006</td>
<td align="right">49</td>
<td align="right">127</td>
</tr>
<tr class="odd">
<td align="right">2007</td>
<td align="right">50</td>
<td align="right">24</td>
</tr>
<tr class="even">
<td align="right">2008</td>
<td align="right">0</td>
<td align="right">59</td>
</tr>
<tr class="odd">
<td align="right">2009</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2010</td>
<td align="right">0</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2011</td>
<td align="right">74</td>
<td align="right">72</td>
</tr>
<tr class="even">
<td align="right">2012</td>
<td align="right">35</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2013</td>
<td align="right">92</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2014</td>
<td align="right">82</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2015</td>
<td align="right">0</td>
<td align="right">37</td>
</tr>
<tr class="even">
<td align="right">2016</td>
<td align="right">0</td>
<td align="right">36</td>
</tr>
<tr class="odd">
<td align="right">2017</td>
<td align="right">273</td>
<td align="right">109</td>
</tr>
<tr class="even">
<td align="right">2018</td>
<td align="right">0</td>
<td align="right">78</td>
</tr>
<tr class="odd">
<td align="right">2019</td>
<td align="right">48</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="right">2021</td>
<td align="right">117</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="right">2022</td>
<td align="right">0</td>
<td align="right">85</td>
</tr>
<tr class="even">
<td align="right">2023</td>
<td align="right">59</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing hercacstables</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ben Taft <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ben Taft.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
